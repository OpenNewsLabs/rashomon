<!DOCTYPE HTML>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Rashomon Project</title>
    <link href='http://fonts.googleapis.com/css?family=Wire+One'
    rel='stylesheet' type='text/css' async="async" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Fredoka+One|Just+Me+Again+Down+Here'
    rel='stylesheet' type='text/css' />
    <link type="text/css" href="css/ui-lightness/jquery-ui-1.8.23.custom.css" rel="Stylesheet" />  
    <script type="text/javascript" src="js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.23.custom.min.js"></script>
    <script src="upload/js/vendor/jquery.ui.widget.js"></script>
    <script src="jquery.cookie.js"></script>
    <script src="https://login.persona.org/include.js"></script>
    <script src="rashomon.auth.js"></script>

<script type="text/javascript">


Rashomon = {};
Rashomon.loggedIn = function() {
   $("#upload").toggle();
   $("#auth").toggle();
   $.ajax({ /* <-- This example uses jQuery, but you can use whatever you'd like */
      type: 'POST',
      url: 'http://metaviddemo01.ucsc.edu/rashomonupload/admin.php', // This is a URL on your website.
      dataType: 'JSON',
      data: {assertion: auth.assertion},
      success: function(res, status, xhr) {
        console.log("Authentercatered");
        //console.log(res[0]);
      	$.each(res, function(index, value){
          var container = $("<div/>", {class: "media"}).appendTo("#media");
          //var containerList = $("<ul/>").appendTo(container);
          $("<h1/>", { "text": value.name }).appendTo(container);
          var meta = $("<div/>", { "class": "meta", "text": "Time: "}).appendTo(container);
          var c = 0;
          $.each(value.times, function(i, v){
              c++;
          });
          if ( c > 1){

            var times = $("<select/>", { }).appendTo(meta);

            $.each(value.times, function(i, v){
              $("<option/>", { "value": v, "text": i + ": " + v}).appendTo(times);
            });
          } else {
            
            
            $("<span/>", { text: value.times.FileModifyDate }).appendTo(meta);
          }
        })
      },
      error: function(xhr, status, err) { alert("Login .failure: " + err); }
    });


};
</script>

<link rel="stylesheet" type="text/css" href="rashomon.css" />
<style type="text/css">

.media { background: #666; border-radius: 10px;  padding: 2px; color: white; margin-top: 8px; font-size: 8pt;}
.media h1 { padding: 0; margin: 0; color: orange;}
.media ul li { display: inline;}

#upload{
    display: none;
    margin-left: 25px;
    position: relative;
    padding-bottom: 10px;
}
#uploadbrowse{
    margin-left: 25px;

}
#uploadSelect{
    margin-bottom: 10px;
}

body{ background: #aaa;}
#auth { display: none;}
#auth{ margin-left: 300px; margin-top: 75px;}

   </style>
   </head>
<body>
    
    <section id='head'>
        <div id="signin">Sign in</div>

      <header id="mainL">
        <div id="project"><div id="proto">Prototype: (Under Construction)</div><div>The Rashomon Project:</div></div>
        <div class="projectsub">An Online Toolkit for Assembling Multi-Perspective Chronologies</div>
      </header>
      <header id="mainR">
        <div class="projectsub"><a href="http://opinion.berkeley.edu/ddi/">A CITRIS Data &amp; Democracy Project</a>
        </div>
        <header id="sub">
        <nav>
          <a class="but" href="https://github.com/aleatorybug/rashomon">Source Code</a>
          <a class="but" href="about.html">About Rashomon</a>
        </nav>
      </header>

    </section>
      
      </header>

<section id="content">
<div id="auth">
  <p>Before uploading, please sign in with any valid email address.</p> <img class="signin" src="https://developer.mozilla.org/files/3961/persona_sign_in_black.png">
</div>
<div id="upload">
  <div id="media"></div>
</div>

</section>
</body>
</html>
